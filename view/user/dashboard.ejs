<%- include('../layout/pagesHeader') %>

    <head>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>
    <main class="main">
        <div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
            <div class="container">
                <h1 class="page-title">My Account<span>Shop</span></h1>
            </div><!-- End .container -->
        </div><!-- End .page-header -->
        <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
            <div class="container">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a></li>
                    <li class="breadcrumb-item"><a href="/dashboard">Account</a></li>
                    <li class="breadcrumb-item active" aria-current="page">My Account</li>
                </ol>
            </div><!-- End .container -->
        </nav><!-- End .breadcrumb-nav -->

        <div class="page-content">
            <div class="dashboard">
                <div class="container">
                    <div class="row">
                        <aside class="col-md-4 col-lg-3">
                            <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab"
                                        href="#tab-dashboard" role="tab" aria-controls="tab-dashboard"
                                        aria-selected="true">Dashboard</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders"
                                        role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-downloads-link" data-toggle="tab" href="#tab-downloads"
                                        role="tab" aria-controls="tab-downloads" aria-selected="false">Wallet</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address"
                                        role="tab" aria-controls="tab-address" aria-selected="false">Adresses</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-account-link" data-toggle="tab" href="#tab-account"
                                        role="tab" aria-controls="tab-account" aria-selected="false">Account Details</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/logOut">Sign Out</a>
                                </li>
                            </ul>
                        </aside><!-- End .col-lg-3 -->

                        <div class="col-md-8 col-lg-9">
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel"
                                    aria-labelledby="tab-dashboard-link">
                                    <p>Hello <span class="font-weight-normal text-dark">
                                            <%= user.name%>.
                                        </span>
                                        <br>
                                        From your account dashboard you can view your <a href="#tab-orders"
                                            class="tab-trigger-link link-underline">recent orders</a>, manage your <a
                                            href="#tab-address" class="tab-trigger-link">shipping and billing
                                            addresses</a>, and <a href="#tab-account" class="tab-trigger-link">edit your
                                            password and account details</a>.
                                    </p>
                                    <ul>
                                        <li>
                                            <%= user.name%>.
                                        </li>
                                        <li>
                                            <%= user.mobile%>.
                                        </li>
                                        <span style="color:#c96;">
                                            <%= user.email%>
                                        </span>
                                    </ul>
                                    <div>

                                        <!-- Button trigger modal -->

                                        <!-- Button trigger modal -->
                                        <a href="" data-toggle="modal" data-target="#socialMediaModal"><span>click here
                                                Share your referelCode and get revared ₹200 Rupees.</span></a>
                                        <p>Join us today to grab ₹200 upon sign-up! Share your exclusive referral link
                                            through social media and pocket ₹150 for each new member who signs up. Share
                                            the joy, and watch your rewards grow!</p>



                                        <!-- Modal -->
                                        <div class="modal" id="socialMediaModal" tabindex="-1" role="dialog"
                                            aria-labelledby="socialMediaModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="socialMediaModalLabel">Share on
                                                            Social Media & Copy Link</h5>
                                                        <button type="button" class="close" data-dismiss="modal"
                                                            aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row mb-3">
                                                            <div class="col text-center">
                                                                <a href="https://www.facebook.com/sharer/sharer.php?u=<%= encodeURIComponent('http://localhost:3000/register?referel='+user.referelCode) %>"
                                                                    target="_blank" class="btn btn-primary">
                                                                    <i class="fab icon-facebook-f"></i> Facebook
                                                                </a>
                                                            </div>

                                                            <div class="col text-center">
                                                                <a href="https://t.me/share/url?url=http://localhost:3000/register?referel=<%=user.referelCode%>"
                                                                    target="_blank" class="btn btn-info">
                                                                    <i class="fab icon-telegram"></i>Telegram
                                                                </a>
                                                            </div>

                                                            <div class="col text-center">
                                                                <!-- This assumes you're using EJS templating -->
                                                                <!-- Assuming you're using EJS templating -->
                                                                <!-- Assuming you're using EJS templating -->
                                                                <a href="https://api.whatsapp.com/send?text=http://localhost:3000/register?referel=<%=user.referelCode%>"
                                                                    target="_blank" class="btn btn-success"><i
                                                                        class="fab fa-whatsapp"></i>WhatsApp</a></i>




                                                                </a>
                                                            </div>
                                                        </div>

                                                        <div class="input-group">
                                                            <input type="text" class="form-control" id="copyLinkInput"
                                                                value="http://localhost:3000/login?referel=<%=user.referelCode%>">
                                                            <button class="btn" type="" onclick="copyLink()">Copy
                                                                Link</button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </div><!-- .End .tab-pane -->


                                <div class="tab-pane fade" id="tab-orders" role="tabpanel"
                                    aria-labelledby="tab-orders-link">


                                    <!-- <p>No order has been made yet.</p>
								    	<a href="category.html" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a> -->


                                    <div>
                                        <div class="d-flex justify-content-center row">
                                            <div class="col-md-10">
                                                <div class="rounded">
                                                    <div class="table-responsive table-borderless">
                                                        <table class="table">
                                                            <thead>
                                                                <tr>
                                                                    <th>Order Id</th>
                                                                    <th>Total</th>
                                                                    <th>Date</th>
                                                                    <th>status</th>
                                                                    <th>Action</th>

                                                                    <th></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody class="table-body">
                                                                <% orderDetails.forEach(order=>{ %>
                                                                    <tr class="cell-1">
                                                                        <td>
                                                                            <%=order._id %>
                                                                        </td>
                                                                        <td>
                                                                            <%= order.grandTotal %>
                                                                        </td>
                                                                        <td>
                                                                            <%=order.createdAt.toLocaleDateString() %>
                                                                        </td>

                                                                        <td <% if (order.status==='Canceled' ) { %>
                                                                            style="color: red;" <% } else { %>
                                                                                style="color: green;" <% } %>>
                                                                                    <%= order.status %>
                                                                        </td>


                                                                        <td>
                                                                            <a
                                                                                href="/orderdetails?orderId=<%=order._id %>">

                                                                                <button
                                                                                    class="btn btn-outline-primary-2 btn-order btn-block"
                                                                                    style="font-size: 10px; padding: 5px 10px;">Details</button>
                                                                            </a>

                                                                        </td>

                                                                        <td><i
                                                                                class="fa fa-ellipsis-h text-black-50"></i>
                                                                        </td>
                                                                    </tr>
                                                                    <% }) %>

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>






                                </div><!-- .End .tab-pane -->


                                <div class="tab-pane fade" id="tab-downloads" role="tabpanel"
                                    aria-labelledby="tab-downloads-link">

                                    <div>



                                        <div class="card mb-4">
                                            <div class="card-header">
                                                Total Wallet Amount
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title">₹<span id="totalAmount">
                                                        <%=user.walletAmount%>.00
                                                    </span></h5>
                                            </div>
                                        </div>

                                        <div class="card-header">
                                            All Transactions
                                        </div>

                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Order Id</th>
                                                    <th>Date</th>
                                                    <th>type</th>
                                                    <th>Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% transactions.forEach(transaction=> { %>
                                                    <tr>

                                                        <td>
                                                            <%= transaction._id %>
                                                        </td>
                                                        <td>
                                                            <%= transaction.date.toLocaleDateString() %>
                                                        </td>
                                                        <td class="text-warning">
                                                            <%= transaction.type %>
                                                        </td>
                                                        <td>₹<%= transaction.amount %>.00</td>

                                                    </tr>
                                                    <% }) %>
                                            </tbody>
                                        </table>

                                    </div>


                                </div><!-- .End .tab-pane -->

                                <div class="tab-pane fade" id="tab-address" role="tabpanel"
                                    aria-labelledby="tab-address-link">
                                    <p>The following addresses will be used on the checkout page by default.</p>
                                    <!-- Modal HTML Markup -->
                                    <div id="ModalLoginForm" class="modal fade">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h2 class="checkout-title">Billing Details</h2>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>

                                                </div>
                                                <div class="modal-body">

                                                    <form id="addressForm" role="form" method="POST" action="/address">
                                                        <input type="hidden" name="_token" value="">
                                                        <div class="form-group">

                                                            <div class="p-5">



                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <label for="name">First Name *</label>
                                                                        <input name="name" id="name" type="text" class="form-control"  oninput="clearErrorMessage('nameError')">
                                                                        <span id="nameError" class="text-danger"></span>
                                                                    </div><!-- End .col-sm-6 -->
                                                                    

                                                                    <div class="col-sm-6">
                                                                        <label>Phone *</label>
                                                                        <input name="phone" type="text"
                                                                            class="form-control" id="phone"  >
                                                                            <span id="phoneError" class="text-danger"></span>
                                                                    </div><!-- End .col-sm-6 -->
                                                                </div><!-- End .row -->


                                                                <label>Street address *</label>
                                                                <input name="street" type="text" class="form-control" id="street"
                                                                    placeholder="Street name" oninput="clearErrorMessage('streetError')">
                                                                    <span id="streetError" class="text-danger"></span><br>
                                                                <label>House Number *</label>
                                                                <input name="houseNum" type="text" class="form-control" id="houseNum"
                                                                    placeholder="House number " >
                                                                    <span id="houseNumError" class="text-danger"></span><br>

                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <label>Town / City *</label>
                                                                        <input name="city" type="text" id="city"
                                                                            class="form-control" oninput="clearErrorMessage('cityError')">
                                                                            <span id="cityError" class="text-danger"></span><br>
                                                                    </div><!-- End .col-sm-6 -->

                                                                    <div class="col-sm-6">
                                                                        <label>State / Country *</label>
                                                                        <input name="country" type="text" id="country"
                                                                            class="form-control" >
                                                                            <span id="countryError" class="text-danger" oninput="clearErrorMessage('countryError')"></span><br>
                                                                    </div><!-- End .col-sm-6 -->
                                                                </div><!-- End .row -->

                                                                <div class="row">
                                                                    <div class="col-sm-6">
                                                                        <label>Postcode / ZIP *</label>
                                                                        <input name="pincode" type="text" id="pincode"
                                                                            class="form-control" >
                                                                            <span id="pincodeError" class="text-danger"></span><br>
                                                                    </div><!-- End .col-sm-6 -->

                                                                    <div class="col-sm-6">
                                                                        <label>Landmark *</label>
                                                                        <input name="landmark" type="tel" id="landmark"
                                                                            class="form-control" oninput="clearErrorMessage('landmarkError')">
                                                                            <span id="landmarkError" class="text-danger"></span><br>
                                                                    </div><!-- End .col-sm-6 -->
                                                                </div><!-- End .row -->



                                                                <label>Email address *</label>
                                                                <input name="email" type="email" class="form-control" id="email" oninput="clearErrorMessage('emailError')" >
                                                                <span id="emailError" class="text-danger"></span><br>
                                                                <div class="custom-control custom-checkbox">
                                                                    <input type="checkbox" class="custom-control-input"
                                                                        id="checkout-create-acc">
                                                                    <label class="custom-control-label"
                                                                        for="checkout-create-acc">Create an
                                                                        account?</label>
                                                                </div><!-- End .custom-checkbox -->

                                                                <div>
                                                                    <button type="submit" onclick="validateAddressForm()" class="btn btn-success">
                                                                        Add
                                                                    </button>
                                                                </div>

                                                            </div>

                                                        </div>
                                                    </form>
                                                </div>
                                            </div><!-- /.modal-content -->
                                        </div><!-- /.modal-dialog -->
                                    </div><!-- /.modal -->
                                    <button type="button" class="btn btn-outline-primary btn-rounded"
                                        data-toggle="modal" data-target="#ModalLoginForm">
                                        Add new address
                                    </button>


                                    <!-- edit address -->

                                    


                                    <br><br>



                                    <div class="row">
                                        <% address.forEach((item)=>{ %>

                                            <div class="col-lg-6">


                                                <div class="card card-dashboard">
                                                    <div class="card-body">
                                                        <h3 class="card-title">Billing Address</h3>
                                                        <!-- End .card-title -->

                                                        <p>
                                                            <%=item.name%>
                                                        </p>
                                                        <p>
                                                            <%=item.phone%><br>
                                                                <%=item.email%><br>
                                                                    <%=item.houseNo%><br>
                                                                        <%=item.street%><br>
                                                                            <%=item.landmark%><br>
                                                                                <%=item.pincode%><br>
                                                                                    <%=item.city%> <br>
                                                                                        <%=item.country%><br>

                                                                                            <a class="text-danger "
                                                                                                onclick="deleteAddress('<%=item._id%>')">Remove
                                                                                                <i
                                                                                                    class="icon-close"></i></a>
                                                        </p>
                                                    </div><!-- End .card-body -->
                                                </div><!-- End .card-dashboard -->

                                            </div><!-- End .col-lg-6 -->
                                            <% }) %>


                                    </div><!-- End .row -->
                                </div><!-- .End .tab-pane -->

                                <div class="tab-pane fade" id="tab-account" role="tabpanel"
                                    aria-labelledby="tab-account-link">
                                    <form action="/changePassword" method="post">

                                        <!-- <label>Email address *</label>
		        							<input type="email" class="form-control" name="email" required> -->

                                        <label>Current password (leave blank to leave unchanged)</label>
                                        <input type="password" class="form-control" name="curPassword">

                                        <label>New password (leave blank to leave unchanged)</label>
                                        <input type="password" class="form-control" name="newPassword">

                                        <label>Confirm new password</label>
                                        <input name="cPassword" type="password" class="form-control mb-2">

                                        <button type="submit" class="btn btn-outline-primary-2">
                                            <span>SAVE CHANGES</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>
                                    </form>
                                </div><!-- .End .tab-pane -->
                            </div>
                        </div><!-- End .col-lg-9 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .dashboard -->
        </div><!-- End .page-content -->
    </main><!-- End .main -->

    <footer class="footer">
        <div class="footer-middle">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-lg-3">
                        <div class="widget widget-about">
                            <img src="assets/images/logo.png" class="footer-logo" alt="Footer Logo" width="105"
                                height="25">
                            <p>Praesent dapibus, neque id cursus ucibus, tortor neque egestas augue, eu vulputate magna
                                eros eu erat. </p>

                            <div class="social-icons">
                                <a href="#" class="social-icon" target="_blank" title="Facebook"><i
                                        class="icon-facebook-f"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Twitter"><i
                                        class="icon-twitter"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Instagram"><i
                                        class="icon-instagram"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Youtube"><i
                                        class="icon-youtube"></i></a>
                                <a href="#" class="social-icon" target="_blank" title="Pinterest"><i
                                        class="icon-pinterest"></i></a>
                            </div><!-- End .soial-icons -->
                        </div><!-- End .widget about-widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Useful Links</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="about.html">About Molla</a></li>
                                <li><a href="#">How to shop on Molla</a></li>
                                <li><a href="#">FAQ</a></li>
                                <li><a href="contact.html">Contact us</a></li>
                                <li><a href="login.html">Log in</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Payment Methods</a></li>
                                <li><a href="#">Money-back guarantee!</a></li>
                                <li><a href="#">Returns</a></li>
                                <li><a href="#">Shipping</a></li>
                                <li><a href="#">Terms and conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->

                    <div class="col-sm-6 col-lg-3">
                        <div class="widget">
                            <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                            <ul class="widget-list">
                                <li><a href="#">Sign In</a></li>
                                <li><a href="cart.html">View Cart</a></li>
                                <li><a href="#">My Wishlist</a></li>
                                <li><a href="#">Track My Order</a></li>
                                <li><a href="#">Help</a></li>
                            </ul><!-- End .widget-list -->
                        </div><!-- End .widget -->
                    </div><!-- End .col-sm-6 col-lg-3 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .footer-middle -->

        <div class="footer-bottom">
            <div class="container">
                <p class="footer-copyright">Copyright © 2019 Molla Store. All Rights Reserved.</p>
                <!-- End .footer-copyright -->
                <figure class="footer-payments">
                    <img src="assets/images/payments.png" alt="Payment methods" width="272" height="20">
                </figure><!-- End .footer-payments -->
            </div><!-- End .container -->
        </div><!-- End .footer-bottom -->
    </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>



    <!-- Sign in / Register Modal -->
    <div class="modal fade" id="signin-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="icon-close"></i></span>
                    </button>

                    <div class="form-box">
                        <div class="form-tab">
                            <ul class="nav nav-pills nav-fill" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin"
                                        role="tab" aria-controls="signin" aria-selected="true">Sign In</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="register-tab" data-toggle="tab" href="#register" role="tab"
                                        aria-controls="register" aria-selected="false">Register</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="tab-content-5">
                                <div class="tab-pane fade show active" id="signin" role="tabpanel"
                                    aria-labelledby="signin-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="singin-email">Username or email address *</label>
                                            <input type="text" class="form-control" id="singin-email"
                                                name="singin-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="singin-password">Password *</label>
                                            <input type="password" class="form-control" id="singin-password"
                                                name="singin-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>LOG IN</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input"
                                                    id="signin-remember">
                                                <label class="custom-control-label" for="signin-remember">Remember
                                                    Me</label>
                                            </div><!-- End .custom-checkbox -->

                                            <a href="#" class="forgot-link">Forgot Your Password?</a>
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                                <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
                                    <form action="#">
                                        <div class="form-group">
                                            <label for="register-email">Your email address *</label>
                                            <input type="email" class="form-control" id="register-email"
                                                name="register-email" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-group">
                                            <label for="register-password">Password *</label>
                                            <input type="password" class="form-control" id="register-password"
                                                name="register-password" required>
                                        </div><!-- End .form-group -->

                                        <div class="form-footer">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>SIGN UP</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>

                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input" id="register-policy"
                                                    required>
                                                <label class="custom-control-label" for="register-policy">I agree to the
                                                    <a href="#">privacy policy</a> *</label>
                                            </div><!-- End .custom-checkbox -->
                                        </div><!-- End .form-footer -->
                                    </form>
                                    <div class="form-choice">
                                        <p class="text-center">or sign in with</p>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login btn-g">
                                                    <i class="icon-google"></i>
                                                    Login With Google
                                                </a>
                                            </div><!-- End .col-6 -->
                                            <div class="col-sm-6">
                                                <a href="#" class="btn btn-login  btn-f">
                                                    <i class="icon-facebook-f"></i>
                                                    Login With Facebook
                                                </a>
                                            </div><!-- End .col-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .form-choice -->
                                </div><!-- .End .tab-pane -->
                            </div><!-- End .tab-content -->
                        </div><!-- End .form-tab -->
                    </div><!-- End .form-box -->
                </div><!-- End .modal-body -->
            </div><!-- End .modal-content -->
        </div><!-- End .modal-dialog -->
    </div><!-- End .modal -->


   
    <script>
         function clearErrorMessage(inputId) {
                    const errorElement = document.getElementById(inputId);
                    errorElement.style.display = 'none'; // Hide error message when input is provided
                }


function validateName() {
    const name = document.getElementById('name').value.trim();
    const nameError = document.getElementById('nameError');

    if (!name) {
        nameError.textContent = 'Please enter your first name.';
        return false;
    } else {
        nameError.textContent = '';
        return true;
    }
}


function validatePhone() {
    const phone = document.getElementById('phone').value.trim();
    const phoneError = document.getElementById('phoneError');
    const phoneRegex = /^\d{10}$/; // Regular expression for 10 digits
    const numericRegex = /^[0-9]+$/; // Regular expression for numeric characters

    if (!phone) {
        phoneError.textContent = 'Please enter your phone number.';
        return false;
    } else if (!numericRegex.test(phone)) {
        phoneError.textContent = 'Phone number should contain only numbers.';
        return false;
    } else if (!phoneRegex.test(phone)) {
        phoneError.textContent = 'Phone number should be 10 digits.';
        return false;
    } else {
        phoneError.textContent = '';
        return true;
    }
}

function validateStreet() {
    const street = document.getElementById('street').value.trim();
    const streetError = document.getElementById('streetError');
    const alphanumericRegex = /^[a-zA-Z0-9\s,.'-]*$/; // Regular expression for alphanumeric characters and some special characters commonly found in street addresses

    if (!street) {
        streetError.textContent = 'Please enter your street address.';
        return false;
    } else if (!alphanumericRegex.test(street)) {
        streetError.textContent = 'Please enter a valid street address.';
        return false;
    } else {
        streetError.textContent = '';
        return true;
    }
}

function validateHouseNumber() {
    const houseNum = document.getElementById('houseNum').value.trim();
    const houseNumError = document.getElementById('houseNumError');
    const numberRegex = /^[0-9]+$/;

    if (!houseNum) {
        houseNumError.textContent = 'Please enter your house number.';
        return false;
    } else if (!numberRegex.test(houseNum)) {
        houseNumError.textContent = 'Please enter a valid house number containing only numbers.';
        return false;
    } else {
        houseNumError.textContent = '';
        return true;
    }
}

function validateCity() {
    const city = document.getElementsByName('city')[0].value.trim();
    const cityError = document.getElementById('cityError');
    const cityRegex = /^[a-zA-Z\s]+$/; // Regex to allow only letters and spaces

    if (!city) {
        cityError.textContent = 'Please enter the town/city.';
        return false;
    } else if (!cityRegex.test(city)) {
        cityError.textContent = 'Please enter a valid town/city name containing only letters and spaces.';
        return false;
    } else {
        cityError.textContent = '';
        return true;
    }
}

function validateCountry() {
    const country = document.getElementsByName('country')[0].value.trim();
    const countryError = document.getElementById('countryError');
    const countryRegex = /^[a-zA-Z\s]+$/; // Regex to allow only letters and spaces

    if (!country) {
        countryError.textContent = 'Please enter the state/country.';
        return false;
    } else if (!countryRegex.test(country)) {
        countryError.textContent = 'Please enter a valid state/country name containing only letters and spaces.';
        return false;
    } else {
        countryError.textContent = '';
        return true;
    }
}

function validatePincode() {
    const pincode = document.getElementsByName('pincode')[0].value.trim();
    const pincodeError = document.getElementById('pincodeError');
    const pincodeRegex = /^[0-9]+$/; // Regex to allow only digits (numbers)

    if (!pincode) {
        pincodeError.textContent = 'Please enter the pincode/ZIP.';
        return false;
    } else if (!pincodeRegex.test(pincode)) {
        pincodeError.textContent = 'Please enter a valid pincode/ZIP containing only numbers.';
        return false;
    } else {
        pincodeError.textContent = '';
        return true;
    }
}



function validateEmail() {
    const email = document.getElementsByName('email')[0].value.trim();
    const emailError = document.getElementById('emailError');
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Regex to validate email format

    if (!email) {
        emailError.textContent = 'Please enter your email address.';
        return false;
    } else if (!emailRegex.test(email)) {
        emailError.textContent = 'Please enter a valid email address.';
        return false;
    } else {
        emailError.textContent = '';
        return true;
    }
}

function validateLandmark() {
    const landmark = document.getElementsByName('landmark')[0].value.trim();
    const landmarkError = document.getElementById('landmarkError');

    if (!landmark) {
        landmarkError.textContent = 'Please enter the landmark.';
        return false;
    } else {
        landmarkError.textContent = '';
        return true;
    }
}





// Create similar functions for other form fields (e.g., street, house number, etc.)

function validateAddressForm() {
    const isNameValid = validateName();
    const isPhoneValid = validatePhone();
    const isStreetValid = validateStreet();
    const isHouseValid = validateHouseNumber();
    const isvalidateCity = validateCity();
    const isvalidateCountry = validateCountry();
    const isvalidatePincode = validatePincode();
    const isvalidateEmail = validateEmail();
    const isvalidateLandmark = validateLandmark();

    // Call other validation functions and assign results to respective variables
    
    if (isNameValid && isPhoneValid && isStreetValid && isHouseValid &&
    isvalidateCity && isvalidateCountry && isvalidatePincode && isvalidateEmail &&
    isvalidateLandmark
    ) {
        // Perform other actions or submit the form
        // Example: document.getElementById('yourFormId').submit();
    }
}






async function deleteAddress(addresId) {
    Swal.fire({
        title: "Are you sure?",
        text: "You won't be able to revert this!",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Yes, delete it!"
    }).then(async (result) => {
        if (result.isConfirmed) {
            try {
                const response = await fetch(`/deleteAddress?address=${addresId}`, {
                    method: 'GET'
                });

                if (response.ok) {
                    await Swal.fire({
                        title: "Deleted!",
                        text: "Your file has been deleted.",
                        icon: "success"
                    });
                    window.location.reload();
                } else {
                    await Swal.fire({
                        title: "Failed to delete!",
                        text: "Your file is not deleted.",
                        icon: "error"
                    });
                    // Optionally handle response message here
                    const data = await response.json();
                    alert(data.message);
                }
            } catch (error) {
                console.error('Error occurred:', error);
                Swal.fire({
                    title: "Error",
                    text: "An error occurred while deleting the address.",
                    icon: "error"
                });
            }
        }
    });

    
}


        function copyLink() {
            const copyText = document.getElementById("copyLinkInput");
            copyText.select();
            document.execCommand("copy");
            alert("Copied the link: " + copyText.value);
        }


        document.getElementById('addressForm').addEventListener('submit', function (event) {
            event.preventDefault();

            const name = document.getElementsByName('name')[0].value;
            const phone = document.getElementsByName('phone')[0].value;
            const email = document.getElementsByName('email')[0].value;
            const houseNum = document.getElementsByName('houseNum')[0].value;
            const street = document.getElementsByName('street')[0].value;
            const landmark = document.getElementsByName('landmark')[0].value;
            const pincode = document.getElementsByName('pincode')[0].value;
            const city = document.getElementsByName('city')[0].value;
            const country = document.getElementsByName('country')[0].value;

            // Construct the data object with form field values
            const formData = {
                name: name,
                phone: phone,
                email: email,
                houseNo: houseNum,
                street: street,
                landmark: landmark,
                pincode: pincode,
                city: city,
                country: country
            };

            fetch('/address', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
                .then(response => {
                    if (response.ok) {
                        window.location.href = '/dashboard';
                    } else {
                        console.error("failed add to address")
                    }
                })
                .catch(error => {
                    console.error(error)
                })
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Plugins JS File -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>
    </body>


    <!-- molla/dashboard.html  22 Nov 2019 10:03:13 GMT -->

    </html>